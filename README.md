# system‚Äëstats üìä

[![GitHub stars](https://img.shields.io/github/stars/Shiro-nn/system-stats-2024?style=social)](https://github.com/Shiro-nn/system-stats-2024/stargazers)
[![GitHub forks](https://img.shields.io/github/forks/Shiro-nn/system-stats-2024?style=social)](https://github.com/Shiro-nn/system-stats-2024/network/members)
[![GitHub issues](https://img.shields.io/github/issues/Shiro-nn/system-stats-2024)](https://github.com/Shiro-nn/system-stats-2024/issues)
[![GitHub last commit](https://img.shields.io/github/last-commit/Shiro-nn/system-stats-2024)](https://github.com/Shiro-nn/system-stats-2024/commits)
[![License: MIT](https://img.shields.io/github/license/Shiro-nn/system-stats-2024)](LICENSE)
[![Status: Archived](https://img.shields.io/badge/status-archived-lightgrey.svg)](https://github.com/Shiro-nn/system-stats-2024)

![Repo Stats](https://github-readme-stats.vercel.app/api/pin/?username=Shiro-nn\&repo=system-stats-2024)

> **system‚Äëstats** ‚Äî –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π Rust‚Äë–∞–≥–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–∑ –≤ –º–∏–Ω—É—Ç—É —Å–æ–±–∏—Ä–∞–µ—Ç –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞–≥—Ä—É–∑–∫–∏ (CPU, –ø–∞–º—è—Ç—å, –¥–∏—Å–∫–∏, —Å–µ—Ç—å, –∞–ø—Ç–∞–π–º, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤) –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –≤ MongoDB. –ü—Ä–æ–µ–∫—Ç –ø–µ—Ä–µ–≤–µ–¥—ë–Ω –≤ –∞—Ä—Ö–∏–≤: –Ω–æ–≤—ã–µ —Ñ–∏—á–∏ –Ω–µ –ø–ª–∞–Ω–∏—Ä—É—é—Ç—Å—è, –Ω–æ –∫–æ–¥ –æ—Å—Ç–∞—ë—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º ¬´–∫–∞–∫ –µ—Å—Ç—å¬ª.

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

| –ú–µ—Ç—Ä–∏–∫–∞      | –ß—Ç–æ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è                                                                               |
| ------------ | --------------------------------------------------------------------------------------------- |
| **CPU**      | –ü—Ä–æ—Ü–µ–Ω—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∏ —á–∞—Å—Ç–æ—Ç–∞ –∫–∞–∂–¥–æ–≥–æ —è–¥—Ä–∞ (—á–µ—Ä–µ–∑ [`sysinfo`](https://crates.io/crates/sysinfo)) |
| **–ü–∞–º—è—Ç—å**   | –û–±—â–∏–π –æ–±—ä—ë–º, –∑–∞–Ω—è—Ç–æ, —Å–≤–æ–±–æ–¥–Ω–æ, –∫—ç—à, swap                                                      |
| **–î–∏—Å–∫–∏**    | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–π —Ç–æ—á–∫–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, —Ç–∏–ø –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—è                                       |
| **–°–µ—Ç—å**     | –¢—Ä–∞—Ñ–∏–∫ –ø–æ –∫–∞–∂–¥–æ–º—É —Å–µ—Ç–µ–≤–æ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É (–≤—Ö–æ–¥/–≤—ã—Ö–æ–¥, –±–∞–π—Ç)                                      |
| **–ü—Ä–æ—Ü–µ—Å—Å—ã** | –û–±—â–µ–µ —á–∏—Å–ª–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤                                                                |
| **–û–±—â–µ–µ**    | –ê–ø—Ç–∞–π–º —Ö–æ—Å—Ç–∞, hostname, –≤–Ω–µ—à–Ω–∏–π IP, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è `category`                               |

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∞–≥–µ–Ω—Ç:

* **–£–¥–∞–ª—è–µ—Ç –∑–∞–ø–∏—Å–∏ —Å—Ç–∞—Ä—à–µ 24‚ÄØ—á–∞—Å–æ–≤**, —á—Ç–æ–±—ã –±–∞–∑–∞ –Ω–µ —Ä–∞–∑—Ä–∞—Å—Ç–∞–ª–∞—Å—å –±–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª—è.
* **–®–∏—Ñ—Ä—É–µ—Ç —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è** –∫ MongoDB –≤ –±–∏–Ω–∞—Ä–Ω–∏–∫–µ —á–µ—Ä–µ–∑ [`include_crypt`](https://crates.io/crates/include_crypt): –Ω–∏–∫–∞–∫–∏—Ö ¬´–≥–æ–ª—ã—Ö¬ª URI –≤ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞—Ö.
* **–†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Linux / macOS / Windows** ‚Äî –≤–µ–∑–¥–µ, –≥–¥–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è `sysinfo` –∏ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –¥—Ä–∞–π–≤–µ—Ä—ã MongoDB.

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

> ‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ:** –ø—Ä–æ–µ–∫—Ç –∑–∞–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω. –ù–∏–∂–µ–æ–ø–∏—Å–∞–Ω–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è ¬´–∫–∞–∫ –µ—Å—Ç—å¬ª. Pull‚Äërequest‚Äô—ã –≤—Å—ë –µ—â—ë –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è, –Ω–æ –º–µ–π–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞.

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–±–æ—Ä–∫–∞

```bash
git clone https://github.com/Shiro-nn/system-stats-2024.git
cd system-stats-2024
cargo build --release   # –Ω–µ–æ–±—Ö–æ–¥–∏–º Rust 1.75+
```

–ë–∏–Ω–∞—Ä–Ω–∏–∫ –ø–æ—è–≤–∏—Ç—Å—è –≤ `target/release/system-stats` (`.exe` –ø–æ–¥ Windows).

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MongoDB

1. –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –¥–æ—Å—Ç—É–ø–æ–º –Ω–∞ –∑–∞–ø–∏—Å—å –≤ –≤–∞—à—É –±–∞–∑—É;
2. –°—Ñ–æ—Ä–º–∏—Ä—É–π—Ç–µ URI:

   ```
   mongodb+srv://USER:PASSWORD@cluster0.mongodb.net/monitoring?retryWrites=true&w=majority
   ```
3. –ó–∞—à–∏—Ñ—Ä—É–π—Ç–µ URI –∫–æ–º–∞–Ω–¥–æ–π:

   ```bash
   echo "mongodb+srv://USER:PASSWORD@..." | include_crypt-cli encrypt -k "your‚Äësecret‚Äëkey" > src/mongodb.txt
   ```
4. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç ‚Äî —Å—Ç—Ä–æ–∫–∞ –±—É–¥–µ—Ç –∑–∞—à–∏—Ç–∞ –≤ –±–∏–Ω–∞—Ä–Ω–∏–∫.

### 3. –ó–∞–ø—É—Å–∫ –∞–≥–µ–Ω—Ç–∞

```bash
./system-stats-2024 "MyServer / Prod"
```

*–ê—Ä–≥—É–º–µ–Ω—Ç—ã –ø–æ—Å–ª–µ –∏–º–µ–Ω–∏ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –≤ –ø–æ–ª–µ `category` –∏ –ø–æ–º–æ–≥–∞—é—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Ö–æ—Å—Ç—ã –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º.* –ï—Å–ª–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –Ω–µ—Ç, –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî **Unknown**.

–ê–≥–µ–Ω—Ç –≤—ã–≤–æ–¥–∏—Ç –ª–æ–≥ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –∑–∞—Ç–µ–º —Ä–∞–∑ –≤ –º–∏–Ω—É—Ç—É –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å.

---

## üì¶ –§–æ—Ä–º–∞—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤ MongoDB

```json
{
  "category": "MyServer / Prod",
  "name": "my‚Äëhostname",
  "uptime": 86400,
  "date": 1721116800000,
  "processes": 175,
  "cpus": [
    { "load": "12%", "frequency": 3292 },
    { "load": "08%", "frequency": 3292 }
  ],
  "memory": {
    "total": 16777216,
    "load": 9453312,
    "cache": 2149580,
    "used": 7239456,
    "swap_total": 0,
    "swap_free": 0,
    "swap_used": 0
  },
  "disks": [
    { "load": "43%", "usage": 50465865728, "name": "/dev/sda1 (SSD)" }
  ],
  "network": [
    { "name": "eth0", "inbount": 102400, "outbount": 51200 }
  ]
}
```

---

## üìù –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```js
// –í—ã–≤–µ—Å—Ç–∏ —Å—Ä–µ–¥–Ω—é—é –∑–∞–≥—Ä—É–∑–∫—É CPU –ø–æ –∫–∞–∂–¥–æ–º—É —Ö–æ—Å—Ç—É –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å
db.system.aggregate([
  { $match: { date: { $gte: Date.now() - 3600 * 1000 } } },
  { $group: {
      _id: "$name",
      avgCpu: { $avg: { $toDouble: { $substr: ["$cpus.load", 0, 2] } } }
  } },
  { $sort: { avgCpu: -1 } }
]);
```

---

## ü§ù –í–∫–ª–∞–¥

* –§–æ—Ä–∫–∞–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –≤–µ—Ç–∫—É `feature/your-feature`, –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ PR.
* –ü–µ—Ä–µ–¥ –ø—É—à–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç–µ `cargo fmt && cargo clippy -- -D warnings`.

---

## ‚öñÔ∏è –õ–∏—Ü–µ–Ω–∑–∏—è

–ö–æ–¥ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π **MIT**. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ, –∫–∞–∫ —Å—á–∏—Ç–∞–µ—Ç–µ –Ω—É–∂–Ω—ã–º ‚Äî –Ω–æ –ø–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç –±–æ–ª—å—à–µ **–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ**.
